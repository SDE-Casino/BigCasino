version: "3.9"

services:
  deck-adapter:
    build: ./deck_adapter
    container_name: deck-adapter
    ports:
      - "8101:8000"
    volumes:
      - ./deck_adapter:/app
    command: uvicorn main:app --host 0.0.0.0 --port 8000 --reload
    networks:
      - default

  solitaire-logic:
    build: ./solitaire_logic
    container_name: solitaire-logic
    ports:
      - "8102:8000"
    env_file:
      - ./solitaire_logic/.env
    volumes:
      - ./solitaire_logic:/app
    command: uvicorn main:app --host 0.0.0.0 --port 8000 --reload
    depends_on:
      - deck-adapter
    networks:
      - default

  solitaire-process:
    build: ./process_centric
    container_name: solitaire-process
    ports:
      - "8103:8000"
    env_file:
      - ./process_centric/.env
    volumes:
      - ./process_centric:/app
    command: uvicorn main:app --host 0.0.0.0 --port 8000 --reload
    depends_on:
      - solitaire-logic
    networks:
      - default

networks:
  default:
    driver: bridge